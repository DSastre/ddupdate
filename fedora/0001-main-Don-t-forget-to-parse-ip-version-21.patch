From 2ff7c32cf4a4ffbfc65a2d84f8d7a95565a25a50 Mon Sep 17 00:00:00 2001
From: Alec leamas <leamas.alec@nowhere.net>
Date: Tue, 4 Jun 2019 16:05:15 +0200
Subject: [PATCH] main: Don't forget to parse ip-version (#21).

---
 lib/ddupdate/main.py | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/lib/ddupdate/main.py b/lib/ddupdate/main.py
index ba89cc7..69ca071 100755
--- a/lib/ddupdate/main.py
+++ b/lib/ddupdate/main.py
@@ -35,6 +35,7 @@ DEFAULTS = {
     'address-plugin': 'default-if',
     'service-plugin': 'dry-run',
     'loglevel': 'info',
+    'ip-version': 'v4',
     'service-options': None,
     'address-options': None,
     'ip-cache': os.path.join(CACHE_DIR, 'ddupdate'),
@@ -189,7 +190,7 @@ def get_parser(conf):
         "-v", "--ip-version", metavar='version',
         choices=['all', 'v6', 'v4'],
         help='Ip address version(s) to register (v6, v4, all) [v4]',
-        default='v4')
+        default='')
     normals.add_argument(
         "-o", "--service-option", metavar="plugin option",
         help='Service plugin option (enter multiple times if required)',
@@ -244,6 +245,8 @@ def parse_options(conf):
         opts.address_options = conf['address-options']
     if not opts.service_options:
         opts.service_options = conf['service-options']
+    if not opts.ip_version:
+        opts.ip_version = conf['ip-version']
     opts.loglevel = level_by_name[opts.loglevel]
     opts.ip_cache = conf['ip-cache']
     return opts
-- 
2.20.1

